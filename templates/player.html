<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mraprguild Cloud Player</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      background: linear-gradient(135deg, #0f0c29 0%, #302b63 50%, #24243e 100%);
      color: #fff;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      padding: 20px;
      position: relative;
      overflow-x: hidden;
    }
    
    .container {
      width: 100%;
      max-width: 1200px;
      background: rgba(20, 20, 30, 0.95);
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    header {
      padding: 25px 30px;
      background: rgba(30, 30, 45, 0.9);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      text-align: center;
    }
    
    h1 {
      font-size: 2.2rem;
      background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
      margin-bottom: 10px;
    }
    
    .subtitle {
      color: rgba(255, 255, 255, 0.7);
      font-size: 1rem;
    }
    
    .player-section {
      padding: 30px;
    }
    
    .player-container {
      position: relative;
      border-radius: 15px;
      overflow: hidden;
      background: #000;
      margin-bottom: 30px;
    }
    
    #videoContainer {
      width: 100%;
      position: relative;
      min-height: 500px;
    }
    
    video {
      width: 100%;
      height: 100%;
      display: block;
      outline: none;
    }
    
    .custom-controls {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(transparent, rgba(0, 0, 0, 0.9));
      padding: 20px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    
    #videoContainer:hover .custom-controls {
      opacity: 1;
    }
    
    .progress-container {
      width: 100%;
      height: 6px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 3px;
      cursor: pointer;
      overflow: hidden;
      position: relative;
    }
    
    #bufferBar {
      position: absolute;
      height: 100%;
      background: rgba(255, 255, 255, 0.1);
      width: 0%;
    }
    
    #progressBar {
      height: 100%;
      background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
      width: 0%;
      border-radius: 3px;
      position: relative;
      z-index: 2;
    }
    
    .time-display {
      display: flex;
      justify-content: space-between;
      font-size: 0.9rem;
      color: rgba(255, 255, 255, 0.9);
      margin-top: 5px;
    }
    
    .control-buttons {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
    }
    
    .left-controls, .right-controls {
      display: flex;
      align-items: center;
      gap: 15px;
    }
    
    .control-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      padding: 10px;
      border-radius: 50%;
      transition: all 0.2s ease;
      width: 45px;
      height: 45px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    .control-btn:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: scale(1.1);
    }
    
    .volume-container {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    #volumeSlider {
      width: 80px;
      height: 4px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 2px;
      cursor: pointer;
      -webkit-appearance: none;
    }
    
    #volumeSlider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #00dbde;
      cursor: pointer;
    }
    
    .action-buttons {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 15px;
      margin-top: 20px;
    }
    
    @media (min-width: 768px) {
      .action-buttons {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    
    .action-btn {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 20px 15px;
      background: rgba(255, 255, 255, 0.05);
      color: white;
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      text-align: center;
    }
    
    .action-btn:hover {
      background: rgba(255, 255, 255, 0.1);
      border-color: #00dbde;
      transform: translateY(-2px);
    }
    
    .action-btn.download {
      background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
      border: none;
    }
    
    .action-btn.download:hover {
      box-shadow: 0 10px 20px rgba(0, 219, 222, 0.3);
    }
    
    .action-btn i {
      font-size: 1.5rem;
      margin-bottom: 5px;
    }
    
    .loading-screen {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 100;
    }
    
    .spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(255, 255, 255, 0.1);
      border-top-color: #00dbde;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 15px;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .notification {
      position: fixed;
      bottom: 20px;
      right: 20px;
      background: rgba(30, 30, 45, 0.95);
      padding: 12px 16px;
      border-radius: 8px;
      border-left: 4px solid #00dbde;
      transform: translateX(100%);
      opacity: 0;
      transition: all 0.3s ease;
      z-index: 1000;
    }
    
    .notification.show {
      transform: translateX(0);
      opacity: 1;
    }
    
    .notification.error {
      border-left-color: #ff4444;
    }
    
    .notification.success {
      border-left-color: #00C851;
    }
    
    .media-info {
      background: rgba(30, 30, 45, 0.7);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 15px;
    }
    
    .media-type {
      background: linear-gradient(90deg, #00dbde 0%, #fc00ff 100%);
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
    }
    
    .media-category {
      background: rgba(0, 219, 222, 0.2);
      padding: 5px 15px;
      border-radius: 20px;
      font-size: 0.9rem;
      border: 1px solid rgba(0, 219, 222, 0.5);
    }
    
    @media (max-width: 768px) {
      .container {
        border-radius: 15px;
      }
      
      .player-section {
        padding: 15px;
      }
      
      #videoContainer {
        min-height: 300px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .action-buttons {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .control-buttons {
        flex-wrap: wrap;
        gap: 10px;
      }
      
      .left-controls, .right-controls {
        flex-wrap: wrap;
      }
      
      .media-info {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1><i class="fas fa-play-circle"></i> Mraprguild Cloud Player</h1>
      <div class="subtitle">Stream media files with external player support</div>
    </header>
    
    <div class="player-section">
      <div class="media-info">
        <div id="mediaTitle">Loading media...</div>
        <div class="media-type" id="mediaType">Video</div>
        <div class="media-category" id="mediaCategory">MP4</div>
      </div>
      
      <div class="player-container">
        <div id="videoContainer">
          <video id="mainVideo">
            Your browser does not support the video tag.
          </video>
          <div class="custom-controls">
            <div class="progress-container" id="progressContainer">
              <div id="bufferBar"></div>
              <div id="progressBar"></div>
            </div>
            <div class="time-display">
              <span id="currentTime">00:00</span>
              <span id="duration">00:00</span>
            </div>
            <div class="control-buttons">
              <div class="left-controls">
                <button class="control-btn" id="playPauseBtn" title="Play/Pause">
                  <i class="fas fa-play"></i>
                </button>
                <button class="control-btn" id="rewindBtn" title="Rewind 10s">
                  <i class="fas fa-backward"></i>
                </button>
                <button class="control-btn" id="forwardBtn" title="Forward 10s">
                  <i class="fas fa-forward"></i>
                </button>
              </div>
              <div class="right-controls">
                <button class="control-btn" id="fullscreenBtn" title="Fullscreen">
                  <i class="fas fa-expand"></i>
                </button>
                <div class="volume-container">
                  <button class="control-btn" id="muteBtn" title="Mute">
                    <i class="fas fa-volume-up"></i>
                  </button>
                  <input type="range" id="volumeSlider" min="0" max="1" step="0.01" value="1">
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="loading-screen" id="loadingScreen">
          <div class="spinner"></div>
          <p>Loading media...</p>
        </div>
      </div>
      
      <div class="action-buttons">
        <button class="action-btn download" id="downloadBtn">
          <i class="fas fa-download"></i>
          <span>Download</span>
        </button>
        <button class="action-btn" id="mxPlayerBtn">
          <i class="fas fa-play"></i>
          <span>MX Player</span>
        </button>
        <button class="action-btn" id="vlcPlayerBtn">
          <i class="fas fa-play-circle"></i>
          <span>VLC Player</span>
        </button>
        <button class="action-btn" id="playitPlayerBtn">
          <i class="fas fa-gamepad"></i>
          <span>Playit</span>
        </button>
        <button class="action-btn" id="kmPlayerBtn">
          <i class="fas fa-play"></i>
          <span>KM Player</span>
        </button>
      </div>
    </div>
  </div>
  
  <div class="notification" id="notification">
    <div id="notificationMessage"></div>
  </div>

  <script>
    // Player state
    const player = {
      video: null,
      mediaUrl: '',
      mediaType: '',
      isPlaying: false,
      isMuted: false,
      volume: 1,
      isFullscreen: false
    };

    // Initialize player
    document.addEventListener('DOMContentLoaded', function() {
      initPlayer();
    });

    function initPlayer() {
      player.video = document.getElementById('mainVideo');
      parseMediaURL();
      setupEventListeners();
    }

    function parseMediaURL() {
      try {
        // Try to get URL from query parameters first
        const urlParams = new URLSearchParams(window.location.search);
        let mediaUrl = urlParams.get('url');
        
        // If not in query params, try to parse from path
        if (!mediaUrl) {
          const pathParts = window.location.pathname.split('/');
          const playerIndex = pathParts.indexOf('player');
          
          if (playerIndex !== -1 && pathParts.length > playerIndex + 2) {
            // Format: /player/{type}/{base64_url}
            const type = pathParts[playerIndex + 1];
            const encodedUrl = pathParts[playerIndex + 2];
            mediaUrl = decodeBase64Url(encodedUrl);
            
            if (mediaUrl) {
              player.mediaType = type;
              document.getElementById('mediaType').textContent = type.charAt(0).toUpperCase() + type.slice(1);
            }
          }
        }
        
        // If still no URL, check for hash parameter
        if (!mediaUrl && window.location.hash) {
          const hash = window.location.hash.substring(1);
          if (hash.startsWith('http')) {
            mediaUrl = hash;
          } else {
            mediaUrl = decodeBase64Url(hash);
          }
        }
        
        if (!mediaUrl) {
          showNotification('No media URL provided', 'error');
          return;
        }
        
        player.mediaUrl = mediaUrl;
        
        // Set video source
        player.video.src = mediaUrl;
        
        // Update media info
        updateMediaInfo(mediaUrl);
        
        showNotification('Media loaded successfully');
        
      } catch (error) {
        console.error('Error parsing URL:', error);
        showNotification('Error loading media. Please check the URL.', 'error');
      }
    }

    function decodeBase64Url(encoded) {
      try {
        // URL-safe base64 decoding
        let base64 = encoded.replace(/-/g, '+').replace(/_/g, '/');
        
        // Add padding if needed
        const pad = base64.length % 4;
        if (pad) {
          base64 += '===='.slice(pad);
        }
        
        // Decode and return
        return decodeURIComponent(atob(base64));
      } catch (error) {
        console.error('Error decoding base64:', error);
        return null;
      }
    }

    function setupEventListeners() {
      const video = player.video;
      
      // Video events
      video.addEventListener('loadeddata', onVideoLoaded);
      video.addEventListener('timeupdate', updateProgress);
      video.addEventListener('progress', updateBuffer);
      video.addEventListener('play', () => {
        player.isPlaying = true;
        updatePlayButton();
      });
      video.addEventListener('pause', () => {
        player.isPlaying = false;
        updatePlayButton();
      });
      video.addEventListener('volumechange', updateVolumeUI);
      video.addEventListener('ended', () => {
        showNotification('Playback completed');
      });
      video.addEventListener('error', (e) => {
        console.error('Video error:', video.error);
        showNotification('Error loading video. Please try again.', 'error');
        hideLoading();
      });
      video.addEventListener('durationchange', updateDuration);
      
      // Control buttons
      document.getElementById('playPauseBtn').addEventListener('click', togglePlayPause);
      document.getElementById('rewindBtn').addEventListener('click', () => seek(-10));
      document.getElementById('forwardBtn').addEventListener('click', () => seek(10));
      document.getElementById('muteBtn').addEventListener('click', toggleMute);
      document.getElementById('fullscreenBtn').addEventListener('click', toggleFullscreen);
      
      // Action buttons
      document.getElementById('downloadBtn').addEventListener('click', downloadMedia);
      document.getElementById('mxPlayerBtn').addEventListener('click', openInMXPlayer);
      document.getElementById('vlcPlayerBtn').addEventListener('click', openInVLCPlayer);
      document.getElementById('playitPlayerBtn').addEventListener('click', openInPlayit);
      document.getElementById('kmPlayerBtn').addEventListener('click', openInKMPlayer);
      
      // Volume slider
      const volumeSlider = document.getElementById('volumeSlider');
      volumeSlider.addEventListener('input', function(e) {
        player.volume = parseFloat(e.target.value);
        video.volume = player.volume;
        player.isMuted = player.volume === 0;
        updateMuteButton();
      });
      
      // Progress bar click
      const progressContainer = document.getElementById('progressContainer');
      progressContainer.addEventListener('click', function(e) {
        const rect = this.getBoundingClientRect();
        const percent = (e.clientX - rect.left) / rect.width;
        video.currentTime = percent * video.duration;
      });
      
      // Keyboard shortcuts
      document.addEventListener('keydown', handleKeyPress);
      
      // Fullscreen change
      document.addEventListener('fullscreenchange', function() {
        player.isFullscreen = !!document.fullscreenElement;
      });
    }

    function onVideoLoaded() {
      hideLoading();
      updateDuration();
      
      // Try to auto-play
      const playPromise = player.video.play();
      if (playPromise !== undefined) {
        playPromise.catch(error => {
          console.log('Auto-play was prevented:', error);
        });
      }
    }

    function togglePlayPause() {
      if (player.video.paused || player.video.ended) {
        player.video.play();
      } else {
        player.video.pause();
      }
    }

    function updatePlayButton() {
      const btn = document.getElementById('playPauseBtn');
      const icon = btn.querySelector('i');
      icon.className = player.isPlaying ? 'fas fa-pause' : 'fas fa-play';
    }

    function seek(seconds) {
      player.video.currentTime += seconds;
      showNotification(`Seeked ${seconds > 0 ? 'forward' : 'backward'} ${Math.abs(seconds)}s`);
    }

    function toggleMute() {
      player.isMuted = !player.isMuted;
      player.video.muted = player.isMuted;
      updateMuteButton();
      showNotification(player.isMuted ? 'Muted' : 'Unmuted');
    }

    function updateMuteButton() {
      const btn = document.getElementById('muteBtn');
      const icon = btn.querySelector('i');
      icon.className = player.isMuted || player.volume === 0 ? 'fas fa-volume-mute' : 'fas fa-volume-up';
      document.getElementById('volumeSlider').value = player.volume;
    }

    function updateVolumeUI() {
      player.volume = player.video.volume;
      player.isMuted = player.video.muted;
      updateMuteButton();
    }

    function toggleFullscreen() {
      const container = document.getElementById('videoContainer');
      
      if (!player.isFullscreen) {
        if (container.requestFullscreen) {
          container.requestFullscreen();
        } else if (container.webkitRequestFullscreen) {
          container.webkitRequestFullscreen();
        }
        player.isFullscreen = true;
      } else {
        if (document.exitFullscreen) {
          document.exitFullscreen();
        } else if (document.webkitExitFullscreen) {
          document.webkitExitFullscreen();
        }
        player.isFullscreen = false;
      }
    }

    function updateProgress() {
      const video = player.video;
      if (!isNaN(video.duration) && video.duration > 0) {
        const percent = (video.currentTime / video.duration) * 100;
        document.getElementById('progressBar').style.width = percent + '%';
        document.getElementById('currentTime').textContent = formatTime(video.currentTime);
      }
    }

    function updateBuffer() {
      const video = player.video;
      if (video.buffered.length > 0 && video.duration > 0) {
        const bufferedEnd = video.buffered.end(video.buffered.length - 1);
        const bufferPercent = (bufferedEnd / video.duration) * 100;
        document.getElementById('bufferBar').style.width = bufferPercent + '%';
      }
    }

    function updateDuration() {
      const video = player.video;
      if (!isNaN(video.duration) && video.duration > 0) {
        document.getElementById('duration').textContent = formatTime(video.duration);
      }
    }

    function updateMediaInfo(url) {
      try {
        // Extract filename from URL
        const urlObj = new URL(url);
        const filename = urlObj.pathname.split('/').pop();
        const decodedFilename = decodeURIComponent(filename);
        
        document.getElementById('mediaTitle').textContent = decodedFilename;
        
        // Detect file type
        const ext = filename.split('.').pop().toLowerCase();
        const fileTypes = {
          'mp4': 'MP4 Video',
          'mkv': 'MKV Video',
          'avi': 'AVI Video',
          'mov': 'MOV Video',
          'webm': 'WebM Video',
          'mp3': 'MP3 Audio',
          'wav': 'WAV Audio',
          'ogg': 'OGG Audio',
          'jpg': 'JPG Image',
          'jpeg': 'JPEG Image',
          'png': 'PNG Image',
          'gif': 'GIF Image'
        };
        
        const fileType = fileTypes[ext] || ext.toUpperCase();
        document.getElementById('mediaCategory').textContent = fileType;
        
      } catch (error) {
        console.error('Error updating media info:', error);
      }
    }

    function downloadMedia() {
      if (!player.mediaUrl) {
        showNotification('No media file to download', 'error');
        return;
      }
      
      try {
        const link = document.createElement('a');
        link.href = player.mediaUrl;
        
        // Extract filename from URL
        const filename = player.mediaUrl.split('/').pop().split('?')[0];
        link.download = filename || 'download';
        
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
        
        showNotification('Download started', 'success');
        
      } catch (error) {
        console.error('Download error:', error);
        showNotification('Download failed. Please try right-clicking the video and selecting "Save video as..."', 'error');
      }
    }

    function openInMXPlayer() {
      if (!player.mediaUrl) {
        showNotification('No media URL available', 'error');
        return;
      }
      
      try {
        Open in MX Player
    function openInMXPlayer(url) {
      // MX Player uses a custom intent system
      const mxUrl = `intent:${url}#Intent;package=com.mxtech.videoplayer.ad;S.title=Cloud%20Player;end`;
      window.location.href = mxUrl;
      
      // Fallback in case MX Player is not installed
      setTimeout(function() {
        if (!document.webkitHidden && !document.hidden) {
          alert('MX Player not found. Please install MX Player or try another player.');
        }
      }, 1000);
    }
        
      } catch (error) {
        console.error('Error opening MX Player:', error);
        showNotification('Cannot open MX Player. Please install the app.', 'error');
      }
    }

    function openInVLCPlayer() {
      if (!player.mediaUrl) {
        showNotification('No media URL available', 'error');
        return;
      }
      
      try {
        // VLC Player URL scheme
        const vlcUrl = `vlc://${player.mediaUrl}`;
        
        // Try to open VLC Player
        window.location.href = vlcUrl;
        
        // Fallback after delay
        setTimeout(function() {
          if (!document.hidden) {
            showNotification('VLC Player not found. Please install VLC from official website.', 'error');
            // Offer alternative
            if (confirm('VLC Player not found. Would you like to download it?')) {
              window.open('https://www.videolan.org/vlc/', '_blank');
            }
          }
        }, 1000);
        
      } catch (error) {
        console.error('Error opening VLC Player:', error);
        showNotification('Cannot open VLC Player. Please install the app.', 'error');
      }
    }

    function openInPlayit() {
      if (!player.mediaUrl) {
        showNotification('No media URL available', 'error');
        return;
      }
      
      try {
        // Playit URL scheme
        const playitUrl = `playit://play/${encodeURIComponent(player.mediaUrl)}`;
        
        // Try to open Playit
        window.location.href = playitUrl;
        
        // Fallback after delay
        setTimeout(function() {
          if (!document.hidden) {
            showNotification('Playit not found. Please install Playit from Play Store.', 'error');
            // Offer alternative
            if (confirm('Playit not found. Would you like to install it?')) {
              window.open('https://play.google.com/store/apps/details?id=com.playit.videoplayer', '_blank');
            }
          }
        }, 1000);
        
      } catch (error) {
        console.error('Error opening Playit:', error);
        showNotification('Cannot open Playit. Please install the app.', 'error');
      }
    }

    function openInKMPlayer() {
      if (!player.mediaUrl) {
        showNotification('No media URL available', 'error');
        return;
      }
      
      try {
        // KMPlayer URL scheme
        const kmPlayerUrl = `kmplayer://${player.mediaUrl}`;
        
        // Try to open KMPlayer
        window.location.href = kmpUrl;
        
        // Fallback after delay
        setTimeout(function() {
          if (!document.hidden) {
            showNotification('KMPlayer not found. Please install KMPlayer from Play Store.', 'error');
            // Offer alternative
            if (confirm('KMPlayer not found. Would you like to install it?')) {
              window.open('https://play.google.com/store/apps/details?id=com.kmplayer', '_blank');
            }
          }
        }, 1000);
        
      } catch (error) {
        console.error('Error opening KMPlayer:', error);
        showNotification('Cannot open KMPlayer. Please install the app.', 'error');
      }
    }

    function handleKeyPress(e) {
      // Don't trigger if user is typing
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'BUTTON') {
        return;
      }
      
      switch(e.key.toLowerCase()) {
        case ' ':
        case 'k':
          e.preventDefault();
          togglePlayPause();
          break;
        case 'f':
          e.preventDefault();
          toggleFullscreen();
          break;
        case 'm':
          e.preventDefault();
          toggleMute();
          break;
        case 'arrowleft':
        case 'j':
          e.preventDefault();
          seek(-10);
          break;
        case 'arrowright':
        case 'l':
          e.preventDefault();
          seek(10);
          break;
        case 'arrowup':
          e.preventDefault();
          player.volume = Math.min(1, player.volume + 0.1);
          player.video.volume = player.volume;
          break;
        case 'arrowdown':
          e.preventDefault();
          player.volume = Math.max(0, player.volume - 0.1);
          player.video.volume = player.volume;
          break;
      }
    }

    function showLoading() {
      document.getElementById('loadingScreen').style.display = 'flex';
    }

    function hideLoading() {
      document.getElementById('loadingScreen').style.display = 'none';
    }

    function showNotification(message, type = 'info') {
      const notification = document.getElementById('notification');
      const messageEl = document.getElementById('notificationMessage');
      
      messageEl.textContent = message;
      
      // Set notification type
      notification.className = 'notification';
      if (type === 'error') {
        notification.classList.add('error');
      } else if (type === 'success') {
        notification.classList.add('success');
      }
      
      notification.classList.add('show');
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 3000);
    }

    function formatTime(seconds) {
      if (isNaN(seconds) || seconds < 0) return '00:00';
      
      const hrs = Math.floor(seconds / 3600);
      const mins = Math.floor((seconds % 3600) / 60);
      const secs = Math.floor(seconds % 60);
      
      if (hrs > 0) {
        return `${hrs}:${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
      }
      return `${mins}:${secs.toString().padStart(2, '0')}`;
    }

    // Auto-show loading when page loads
    showLoading();
  </script>
</body>
</html>
